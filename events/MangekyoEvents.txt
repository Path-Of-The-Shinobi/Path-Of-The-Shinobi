namespace = MangekyoEvents

MangekyoEvents.0 = {
    type = character_event
    title = MangekyoEvents.0.t
    desc = MangekyoEvents.0.d

    theme = martial

    right_portrait = {
        character = root
        animation = worry
    }

    left_portrait = {
	character = scope:recipient
	animation = worry
	}

    option = {
		name = MangekyoEvents.0.o
		hidden_effect = {
			scope:actor = {
				add_character_flag = {
                    flag = Used_Amaterasu
                    years = 10
                }
			}

			scope:recipient = {
				add_character_modifier = {
                    modifier = under_amaterasu_modifier
                    years = 15
                }
			}
		}
	}
}

MangekyoEvents.1 = {
    type = character_event
    title = MangekyoEvents.1.t
    desc = MangekyoEvents.1.d

    theme = martial

    right_portrait = {
        character = root
        animation = worry
    }

    left_portrait = {
	character = scope:recipient
	animation = worry
	}

    option = {
		name = MangekyoEvents.1.o
		hidden_effect = {
			scope:actor = {
				add_character_flag = {
                    flag = performed_tsukuyomi
                    years = 10
                }
			}

			scope:recipient = {
				add_character_modifier = {
                    modifier = under_tsukuyomi_modifier
                    years = 15
                }
			}
		}
	}
}

MangekyoEvents.2 = {
    type = character_event
    title = MangekyoEvents.2.t
    desc = MangekyoEvents.2.d

    theme = martial

    right_portrait = {
        character = root
        animation = worry
    }

    left_portrait = {
        character = scope:recipient
        animation = worry
    }

		if = {
			limit = {
				has_trait = mangekyo_sharingan_1
			}
			hidden_effect = {
				scope:actor = {
					add_trait = eternalsharingan
					remove_trait = mangekyo_sharingan_1
				}
				scope:recipient = {
					random_list = {
						10 = { death = { killer = scope:actor death_reason = stolen_sharingan_reason } }
						90 = { 
							add_opinion = { modifier = angry_opinion years = 5 target = scope:actor }
							add_trait = blinded
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				has_trait = mangekyo_sharingan_2
			}
			hidden_effect = {
				scope:actor = {
					add_trait = eternalsharingan
					remove_trait = mangekyo_sharingan_2
				}
				scope:recipient = {
					random_list = {
						10 = { death = { killer = scope:actor death_reason = stolen_sharingan_reason } }
						90 = { 
							add_opinion = { modifier = angry_opinion years = 5 target = scope:actor }
							add_trait = blinded
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				has_trait = mangekyo_sharingan_3
			}
			hidden_effect = {
				scope:actor = {
					add_trait = eternalsharingan
					remove_trait = mangekyo_sharingan_3
				}
				scope:recipient = {
					random_list = {
						10 = { death = { killer = scope:actor death_reason = stolen_sharingan_reason } }
						90 = { 
							add_opinion = { modifier = angry_opinion years = 5 target = scope:actor }
							add_trait = blinded
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				has_trait = mangekyo_sharingan_4
			}
			hidden_effect = {
				scope:actor = {
					add_trait = eternalsharingan
					remove_trait = mangekyo_sharingan_4
				}
				scope:recipient = {
					random_list = {
						10 = { death = { killer = scope:actor death_reason = stolen_sharingan_reason } }
						90 = { 
							add_opinion = { modifier = angry_opinion years = 5 target = scope:actor }
							add_trait = blinded
						}
					}
				}
			}
		}
    }

    option = {
        name = MangekyoEvents.2.a
        hidden_effect = {
            add_character_modifier = {
                modifier = steal_sharingan_modifier
                years = 6
            }
        }
    }
}